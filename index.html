<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>canvasDrawTest</title>
    <style>
        #test-box button{
            width: 400px;
            text-align: left;
        }
    </style>
</head>
<body>
<div id="canvas-box" style="width: 400px; height: 300px; background-color: #5D809E"></div>
<span id="test-box"></span>

<script src="DrawBoard.js"></script>
<script>
var interfaceTest = function() {
    [
        'drawBoard.ctx.fillRect(0, 0, 300, 300)',
        'drawBoard.eraser.type = "circle"',
        'drawBoard.eraser.type = "rectangle"',
        '\n以上用法仅为方便测试, 非接口\n\n',
        'drawBoard.setTool("pen")',
        'drawBoard.setTool("eraser")',
        'drawBoard.setColor("blue")',
        'drawBoard.setColor("darkgreen")',
        'drawBoard.undo()',
        'drawBoard.clear()',
    ].forEach(function(code) {
        var btn = document.createElement('button')
        btn.innerText = code
        btn.style.display = 'block'
        btn.addEventListener('click', () => code[0] !== '\n' && eval(code))
        document.querySelector('#test-box').appendChild(btn)
    })
}

var use = function() {
    var moveIco = 'data:img/jpg;base64,R0lGODlhGgAaAIAAAP8AAP//gCH5BAAAAAAALAAAAAAaABoAAAI5jI+py+0PIYgPWMqsxkl7Dobg5JClGWzH1ajpZ7id65mwQt8yjspsWREJh5kailMj7kRHovMJDRUAADs='
    var div = document.querySelector('#canvas-box')
	window.drawBoard = new DrawBoard(div)
	drawBoard.init({
        pen: {
        	size: 5,
        },
        eraser: {
            ico: moveIco,
            w: 32, // 这个尺寸配合所给的ico
            h: 32,
            offsetX: 13,
            offsetY: 13,
            type: 'rectangle', //'rectangle', 'circle'
        },
        maxStack: 5,
	})
}

var __main = function() {
    use()
    interfaceTest()
}

__main()

</script>

</body>
</html>